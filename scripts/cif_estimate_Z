#! /bin/sh
#!perl -w # --*- Perl -*--
eval 'exec perl -x $0 ${1+"$@"}'
    if 0;
#------------------------------------------------------------------------------
#$Author$
#$Date$ 
#$Revision$
#$URL$
#------------------------------------------------------------------------------
#*
#  Calculate Z value (i.e. the number of "chemical fomula units" in the unit cell
#  using the provided cell volume, crystal density and molecular weight.
#**

use strict;
use COD::CIFParser::CIFParser;
use COD::CIF::Data::CIFEstimateZ;

@ARGV = ( "-" ) unless @ARGV;

for my $filename (@ARGV) {

    my $parser = new COD::CIFParser::CIFParser;

    my $data = $parser->Run($filename, { fix_errors => 1 });

    for my $dataset (@$data) {
        eval {
            print cif_estimate_z( $dataset ), "\n";
        };
        if( $@ ) {
            print STDERR $@;
        }  
    }
}

