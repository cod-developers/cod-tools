cod-tools (unreleased)

  * Changed:
    - clarified option descriptions of the 'cif2cod' script.
    - sdf_add_cod_data:
        - update the script to replace Unicode whitespace symbols with regular
          spaces.
        - improved the handling of incorrectly looped chemical names.
  * Fixed:
    - updated the the ./tools/mkdiffdepend script to read the input file list
      from STDIN when no filenames are provided as command-line arguments.
    - COD::CIF::Unicode2CIF:
       - fixed the decoding of accented characters sequences that consists of
         a base character encoded as a numeric character reference and a single
         combining character encoded as a CIF special code.

cod-tools (3.9.0)

  * Added:
    - cif_set_value:
        - the '--add-tag' option.
    - cif_split:
        - the '--uniquify-file-names' option.
    - cif_mark_disorder:
        - the '--reconstruct-symmetry' and '--uniquify-atoms' options as well
          as their negations. These options allow to optionally restore the
          full unit cell before carrying out the disorder site detection.
        - the '--die-on-errors', '--die-on-warnings', '--die-on-notes' options
          and their negations.
    - the COD::CIF::Data::MarkDisorder module.
    - COD::CIF::Tags::DictTags:
        - added data names from the 'cif_iucr.dic' dictionary version 1.2 to
          the global '@tag_list' variable.
  * Changed:
    - COD::CIF::Data::CIF2COD:
        - added 'sgNumber' to the list of default data fields.
    - COD::CIF::DDL:
        - started setting data item '_units.code' value 'none' for data items
          without explicit units.
        - implemented partial handling of the '_list_reference' data item in
          the ddl1_to_ddlm() subroutine.
        - implemented handling of the '_list_link_parent', '_list_link_child',
          '_list_mandatory', '_related_item' and '_related_function' data items.
        - updated the ddl1_to_ddlm() subroutine to output DDLm dictionaries
          that conform to DDLm reference dictionary version 4.1.0.
    - COD::CIF::DDL::DDLm::Validate:
        - updated the 'Symop' content type validation logic in accordance to
          the changes in the DDLm reference dictionary version 4.2.0.
    - cif_compare_dics:
        - added a check for differing deprecation states.
    - data/replacement-values/replacement_tags.lst:
        - added several data name replacement rules.
  * Fixed:
    - COD::CIF::DDL:
        - ensured that the same date is set to both the '_dictionary.date' data
          item and the most recent entry in the DICTIONARY_AUDIT loop.
        - ensured that the automatically generated dictionary version adheres
          to the requirements of the DDLm 'Version' data type.
        - the description of the '--imports' option in the help message.
    - data/replacement-values/replacement_tags.lst:
        - corrected a rule that incorrectly converted data name
          '_atom_site_refinement_flags' to '_atom_site_refinement_flag'.
    - COD::CIF::DDL::DDLm::Validate:
        - updated several subroutines to properly handle category names with
          uppercase letters.
  * Removed:
    - dependency installer for Fedora 37.

cod-tools (3.8.1)

  * Fixed:
    - spglib now builds with CMake v3.13 or newer.

cod-tools (3.8.0)

  * Added:
    - COD::AtomProperties assembler:
        - covalent radii from Lang and Smith (2014).
        - covalent radii from Zhang (2018).
    - COD::CIF::Data::Check:
        - the check_unquoted_strings() subroutine.
    - COD::CIF::DDL::DDLm:
        - the get_type_source() subroutine.
    - cif_cod_check:
        - the '--check-unquoted-strings' option.
    - cif_molecule:
        - copying '_chemical_name_common', '_chemical_name_systematic' and
          '_chemical_name_mineral' CIF data items from input files to output.
    - dependency installers for Fedora 37, Fedora 38 and Fedora 39.
    - dependency installer for Debian 12.
    - dependency installer for Ubuntu 22.04.
    - COD::Spacegroups::Lookup::COD:
        - four more non-standard space group settings:
            - H-M symbols: 'P 4 21 2 (a-1/4,b+1/4,c)', 'C 2 2 21 (a,b,c+1/4)',
                           'P 21 21 21 (a+1/4,b-1/4,c)', 'P 42/m m c'.
            - Hall symbols: 'P 4ab 2ab (x+1/4,y-1/4,z)', 'C 2c 2 (x,y,z-1/4)',
                            'P 2ac 2ab (x-1/4,y+1/4,z)', -P 4c 2 (x,y+1/2,z)'.
    - cif_estimate_Z:
        - options '--print-header' and '--print-data-block' and their negations.
        - options '--always-continue', '--continue-on-errors', their synonyms
          and negations.
    - the COD::SemVer module.
    - the cif_guess_AMCSD_atom_types script.
  * Changed:
    - COD::CIF::DDL::DDLm::Import:
      - Improved the handling of orphan definitions.
    - COD::CIF::DDL::DDLm::Validate:
      - started treating data items with associated dREL code which assigns
        a default value as evaluatable.
    - COD::SPGLib:
      - switched to spglib v2.1.0.
    - data/replacement-values/replacement_tags.lst:
      - added several data name replacement rules.
    - data/replacement_values/replacement_values.lst
      - added several replacement rules for the following data items:
        - '_atom_site_adp_type'.
        - '_atom_site_thermal_displace_type'.
        - '_refine_ls_structure_factor_coef'.
    - sdf_add_cod_data:
        - started printing DOIs with the 'https://doi.org' prefix.
    - cif_estimate_Z:
        - the script now estimates the Z value from the formula ratio
          if crystal density or molecular wight is not given.
    - cif_ddlm_dic_check:
        - extended the check that detects incompatible definitions of
          measurand and SU data items to check additional attributes.
        - added a check that detects pairs of looped child-parent categories
          with incompatible category key item sets.
        - added a check that detects enumeration range limits that are
          incompatible with the content type of the defining data item.
        - added a check that detects SU data items definitions with an
          incorrect content source.
        - added a check that detects SU data items definitions with incompatible
          explicit enumeration ranges. 
        - added a check that detects improper use of attributes from
          the METHOD category.
        - added a check that detects incorrect use of attribute values
          that are only allowed to appear in the DDLm reference dictionary.
        - added a check that detects incorrect use of attribute values
          that are not allowed to appear in the DDLm reference dictionary.
        - updated the handling of version numbers to allows optional pre-release
          and build metadata labels.
        - added a check that detects the incorrect use of the 'Reference'
          dictionary class.
        - added a check that detects child Set categories that incorrectly have
          parent Loop categories.
        - added a check that detects incorrect use of the 'Matrix' container
          type.
        - added '_enumeration_set.detail' to the list of attributes checked
          for incorrect references when the '--check-references-in-descriptions'
          option is in effect.
        - added a check that detects incorrect use of the HEAD category in the
          category hierarchy.
        - added a check that detects definitions with 'Matrix', 'Array' or
          'List' containers without explicitly specified dimensions.
        - added a check that detects forbidden attributes in template
          dictionaries.
        - extended multiple checks to also apply to template dictionaries.
  * Fixed:
    - COD::CIF::DDL::DDLm::Import:
        - corrected the handling of situations when the same definitions
          are imported multiple times by different dictionaries.
    - COD::CIF::DDL::DDLm::Validate:
        - a typo in a validation message reporting 'datetime' content type
          violations.
        - updated the validate_application_scope() subroutine to no longer
          generate duplicate messages relating to the application scope.
        - updated the check_primitive_data_type() subroutine to treat version
          numbers with pre-release and build metadata labels as valid.
    - cif_cod_deposit:
        - corrected the configuration variable name 'bypass_check_password'.
    - cif_filter:
        - the CIF header is now output only once at the beginning of the
          output stream instead of each data block.
    - cif_symop_apply:
        - updated the handling of atomic coordinates with standard uncertainties
          to no longer generate warnings.
  * Removed:
    - dependency installer for Fedora 35 and Fedora 36.
    - dependency installer for LinuxMint 19.

cod-tools (3.7.0)

  * Added:
    - cif_filter:
        - the '--estimate-space-group' option as an alias for
          the '--estimate-spacegroup' option.
        - the '--keep-unrecognised-space-groups' option as an alias for
          the '--keep-unrecognised-spacegroups' option.
  * Changed:
    - COD::CIF::Data:
        - updated the lookup_space_group() subroutine to also strip leading
          and trailing whitespace symbols when constructing lookup keys.
        - updated the get_space_group_number() subroutine to report symmetry
          operation lists that do not correspond to a known space group.
        - updated the get_space_group_number() subroutine to report space
          group number values that are not integers in the range of [1, 230].
        - added several more alternative space group data names in
          the space_group_data_names() subroutine.
        - updated the get_sg_data() subroutine to also report space group
          information mismatches even when one of the values is a CIF special
          value.
    - COD::CIF::Data::CIF2COD:
        - updated the cif2cod() subroutine to only output the space group IT
          number that is explicitly provided instead of trying to infer it from
          the symmetry operation list.
  * Fixed:
    - COD::CIF::Data:
        - updated the get_space_group_number() subroutine to ignore
          CIF special values.
    - cif_filter:
        - updated the representation of space group symmetry operations derived
          from superspace group symmetry operations to use fractions instead of
          decimals when possible.
    - running Graph::Nauty build and tests only once.
  * Removed:
    - dependency installer for Debian 9.

cod-tools (3.6.0)

  * Added:
    - COD::CIF::Data:
        - the get_space_group_number() subroutine.
    - cif_molecule:
        - implemented the copying of the '_atom_type_symbol' and
          '_atom_type_oxidation_number' data items from the input
          file to the output file.
        - started recoding the space group IT number of
          the input crystal structure in the output as
          the '_cod_molecule_space_group_IT_number' data item.
    - dependency installer for Fedora 36.
    - dependency installer for LinuxMint 21.
  * Changed:
    - COD::CIF::Data::CIF2COD:
        - reworded a warning message generated by
          the get_space_group_h_m_symbol() subroutine
          to be more specific.
        - the optional 'sgNumber' output field.
    - cif_ddlm_dic_check:
        - updated the checks to no longer report the presence of
          the '_category_key.name' attribute in Set category
          definitions as incorrect.
  * Fixed:
    - COD::AtomNeighbours:
        - not adding duplicate bonds between the same atoms in
          neighbour_list_from_cif().
    - COD::Spacegroups::Lookup::COD:
        - changed the space group IT number in the descriptions of
          the 'F d 1 1', 'F 1 d 1', 'F 1 1 d' and 'C 1 c 1 (a-3/8,b-3/8,a+2*c)'
          space groups from '15' to '9'.
    - cif2rdf:
        - fixed the handling of the '--columns' option.
    - cif_cod_check:
        - added the missing File::Basename::dirname() subroutine import.
    - cif_ddlm_dic_check:
        - corrected a validation message describing category key items
          that do not belong to the given category.
    - cif_hkl_COD_number:
        - added the missing COD::SOptions::get_value() subroutine import.
    - cif_split:
        - added the missing COD::SOptions::get_value() subroutine import.
    - cod2rdf:
        - added the missing COD::CIF::JSON::cif2json() subroutine import.
    - ddlm_validate:
        - updated the looped subcategory recognition to also consider
          the '_category_key.name' attribute.
    - sdf_add_cod_data:
        - updated the handling of the <PUBCHEM_SUBSTANCE_COMMENT> data item
          to not exclude fields that contain empty parentheses.
        - updated the handling of the <PUBCHEM_SUBSTANCE_COMMENT> data item
          to not unintentionally remove various text sequences like
          "?-", "?-?", "(?)", etc.
  * Removed:
    - dependency installer for Fedora 34.

cod-tools (3.5.0)

  * Added:
    - COD::AtomNeighbours:
        - neighbour_list_to_chemistry_mol() subroutine.
    - COD::CIF::Data::CODFlags:
        - has_dummy_sites() subroutine.
        - has_non_hydrogen_calc_sites() subroutine.
        - has_superspace_group() subroutine.
        - has_unmodelled_solvent_molecules() subroutine.
    - cif_cod_deposit:
        - the User-Agent HTTP header.
        - the '--no-use-wipe' option.
    - cif_ddlm_dic_check:
        - a check that detects duplicate dREL data names.
    - cif2xyz:
        - the '--print-datablock-name', '--print-formula-sum',
          '--print-chemical-name', '--print-lattice' options
          and their negations.
        - the '--float-format' option (default value "%21.14e").
    - sdf_add_cod_data:
        - several warning messages.
    - the 'codxyz2fract' script.
    - the 'codxyz2ortho' script.
    - the COD::XYZ module.
    - dependency installer for Fedora 35.
  * Changed:
    - cif_ddlm_dic_check:
        - updated the list of attributes that are checked for free-text
          references to data items or categories to also include
          the '_description_example.case' and '_description_example.detail'
          attributes.
    - molcif2sdf:
        - the <PUBCHEM_EXT_DATASOURCE_URL> data item value
          from "https://www.crystallography.net/"
          to "https://www.crystallography.net/cod/".
    - sdf_add_cod_data:
        - the <PUBCHEM_EXT_DATASOURCE_URL> data item value
          from "https://www.crystallography.net/"
          to "https://www.crystallography.net/cod/".
        - implemented the removal of duplicate chemical names.
        - implemented the removal of <PUBCHEM_SUBSTANCE_COMMENT>
          fields that consists entirely of whitespace symbols.
        - improved the handling of values with leading and tailing
          whitespace symbols.
  * Fixed:
    - COD::CIF::Tags::Print:
        - homogenised the formatting of long lines in
          the print_single_tag_and_value() subroutine.
    - COD::CIF::ChangeLog:
        - updated the append_changelog_to_single_item() subroutine
          to properly create the changelog data item if it does not
          yet exist in the data block.
    - codcif:
        - memory leak of the last line read in by the lexer;
        - carriage return ('\r') is allowed in CIF 2.0 file heading;
        - carriage return ('\r') may precede ';' in CIF 2.0 text field
          delimiters.
    - codcif and COD::CIF::Parser::Yapp:
        - not unprefixing a prefixed CIF text field unless all of its lines
          (must be one or more) start with the same prefix.
    - json2cif:
        - corrected the error message that summarises parsing errors.
    - cif_cod_deposit:
        - double quoted several shell variables to properly handle file
          and directory names that contain spaces.
        - corrected a variable name related to the handling of
          the '--separate-outputs' option.
    - cif_correct_tags:
        - corrected the handling of data names that contain extra leading
          underscores and have capital letter in their canonical form.
  * Removed:
    - dependency installer for Debian 8.
    - dependency installer for Fedora 33.

cod-tools (3.4.0)

  * Added:
    - cif_ddlm_dic_check:
        - a check that detects improper usage of
          the _definition_replaced.by attribute.
        - a check that detects improper usage of
          the _category_key.name attribute.
        - a check that detects improper usage of
          the _definition.class attribute.
        - a check that detects improper usage of
          the _type.indices_referenced_id attribute.
        - a check that detects improper usage of
          the _type.contents_referenced_id attribute.
        - a check that detects incompatibilities between the attributes
          of linked data items.
    - cif_ddlm_validate:
        - the '--follow-iucr-style-guide' and '--no-follow-iucr-style-guide'
          options.
        - support for the 'Word' content type.
    - cif_fillcell:
        - the '--dont-merge-special-positions' and
          '--no-merge-special-positions' options.
  * Changed:
    - cif_molecule:
        - reworded several warning messages.
    - COD::CIF::DDL::DDLm:
        - improved the canonicalisation of 'Imag' and 'Complex'
          DDLm content type values.
  * Fixed:
    - COD::AtomNeighbours:
        - fixed failures in processing of atoms without bonds in
          neighbour_list_from_chemistry_opensmiles();
        - switched to generation of refvertexed Graph::Undirected
          objects in neighbour_list_to_graph().
    - COD::CIF::Data:
        - ensured that warning messages in the get_sg_data() subroutine
          are always output in the same order.
    - COD::CIF::Data::AtomList:
        - ensured that the atom_groups() subroutine returns idempotent
          results between different runs with the same data.
    - COD::CIF::DDL::DDLm::Validate:
        - updated the check_su_eligibility() subroutine to properly handle
          the special case of the '_description_example.case' attribute.
        - updated the handling of 'Imag' and 'Complex' content types to
          allow standard uncertainties.

cod-tools (3.3.0)

  * Added:
    - cif_ddlm_dic_check:
        - multiple checks related to the DICTIONARY_AUDIT loop.
        - a check that detects improper definition revision dates.
        - a check that detects measurand data items that do not
          have associated standard uncertainty (SU) data items.
        - a check that detects data names that deviate from
          the IUCr naming convention.
        - a check that detects situations when the type dimension
          attribute is used with incompatible type containers.
        - a check that detects situations when a measurand item
          and the associated SU data item have different units
          of measurement.
        - a check that detects improper _name.linked_item_id
          attribute values.
        - a check that detects improper usage of
          the _enumeration_default.value attribute.
        - a check that detects improper usage of
          the _enumeration.def_index_id attribute.
    - COD::CIF::Data::CIF2COD:
        - updated the cif2cod() subroutine to treat the 'compoundsource'
          field as NULL if the value is recognised as a placeholder value.
        - updated the regex used in the cif2cod() subroutine to recognise
          placeholder values by including the full stop ('.') symbol.
    - COD::CIF::DDL::DDLm:
        - the 'resolve_content_types' option to the build_ddlm_dic()
          subroutine.
        - the 'resolve_implied_type' and 'resolve_byreference_type'
          options to the get_type_contents() subroutines.
  * Changed:
    - COD::CIF::DDL::DDLm::Validate:
        - updated the extract_application_scope() subroutine to properly
          handle the _dictionary_valid.scope and _dictionary_valid.option
          data items.
    - COD::CIF::Data::Check:
        - reporting missing atomic displacement parameters as NOTEs
          instead of WARNINGs.
  * Fixed:
    - COD::CIF::Data::CIF2COD:
        - updated the cif2cod() subroutine to translate CIF 1.1 special codes
          to Unicode characters in the 'compoundsource' field.
    - COD::CIF::Tags::Print:
        - updated the print_loop() subroutine to no longer print unnecessary
          empty lines.
        - updated the print_loop() subroutine to use the maximum available
          line space when outputting loop packets.
        - updated the handling of single line values that start with
          a semicolon (';') in the print_single_tag_and_value() and
          print_loop() subroutines.
    - COD::SUsage:
        - a typo in the output of the options() subroutine.
    - cif_ddlm_dic_check:
        - a typo in an output message.
    - codcif:
        - fixed a buffer overrun.

cod-tools (3.2.0)

  * Added:
    - the 'cif_automorphism' script.
    - cif_cod_check:
      - validation of SHELX checksums.
      - the '--no-max-year-temperature-factors-optional' option.
      - the '--check-adp-presence', '--max-year-adp-presence-is-optional'
        and '--no-max-year-adp-presence-is-optional' options as replacements
        of the deprecated '--check-temperature-factors',
        '--max-year-temperature-factors-optional' and
        '--no-max-year-adp-presence-is-optional' options respectively.
    - cif_fillcell:
      - the '--output-cod-molecule-data-items' option.
    - cif_hkl_check:
      - validation of SHELX checksums.
    - cif_sort_atoms:
      - the '--record-original-order', '--order-child-loops' options;
      - support for ordering according to values of '_atom_type_*' CIF
        loop.
    - cif_CODify:
      - an error message regarding the mandatory input CIF file.
    - COD::AtomProperties assembler:
      - covalent radii from Meng and Lewis (1991).
    - COD::CIF::Data:
      - the calculate_shelx_checksum() subroutine.
    - COD::CIF::Data::CODFlags:
      - the has_attached_hydrogens() subroutine.
    - COD::CIF::Data::Check:
      - the check_shelx_checksums() subroutine;
      - the check_adp_presence() subroutine.
      - a note message informing that the mandatory presence of atom
        displacement parameters will not be checked due to missing
        publication year;
      - a warning message informing that the mandatory presence of
        atom displacement parameters will not be checked due to an
        improper publication year value.
    - COD::CIF::DDL::DDLm:
      - the get_all_data_names() subroutine;
      - a warning message about the treatment of save frames
        without the _definition.id data item in the build_ddlm_dic
        subroutine.
    - COD::ToolsVersion:
      - the get_version_number() and get_version_string() subroutines.
  * Changed:
    - COD::AtomNeighbours:
      - the neighbour_list_from_chemistry_mol() subroutine is no longer
        deprecated;
      - implemented reading of coordinates in
        neighbour_list_from_chemistry_mol().
    - COD::CIF::Data::Check:
      - updated the warning message generated by
        the check_temperature_factors() subroutine.
    - COD::CIF::Data::AtomList:
      - oxidation state is now read from '_atom_type_oxidation_number'
        CIF data item, if available.
    - COD::CIF::DDL::DDLm::Validate:
      - updated the detection and reporting of problems that may potentially
        occur in the DICTIONARY_VALID loop of the DDLm reference dictionary.
    - COD::CIF::Unicode2CIF:
      - mapped the capital sharp S ('ẞ') to the '\&S' CIF special code;
      - mapped the CIF special code for a delocalized double bond ('\\dbb ')
        to the '⎓' Unicode symbol;
      - changed the main Unicode symbol that maps to the CIF special code
        for a dash ('--') from a figure dash ('‒') to an en dash ('–');
      - changed the main Unicode symbols that map to the CIF specials codes
        for angle brackets ('\\langle', '\\rangle') from left/right angle
        brackets ('〈', '〉') to mathematical left/right angle brackets
        ('⟨', '⟩').
    - cif_cod_check:
      - updated the simultaneous presence check to also report the missing
        '_atom_site_aniso_B_*' data items.
    - cif_correct_tags:
      - implemented a more robust handling of replacement list files.
    - cif_compare_dics:
      - reworded several output messages;
      - added a check that ensures that the provided legacy dictionary
        type is among the supported ones;
      - added a check for differing container types.
    - cif_ddl1_dic_check:
      - reworded several output messages;
      - added a check that identifies situations when an item needlessly
        references itself as a list reference;
      - improved the recognition of references to other data items and
        categories in the descriptions of other data items and categories.
    - cif_ddlm_dic_check:
      - reworded several output messages;
      - added several checks related to the _units.code data item.
    - cif_fix_values:
      - added single quotes around enumeration values in warning messages.
    - cif_hkl_check:
      - replaced quotes with square brackets in output messages listing
        arrays of values.
    - cif_select:
      - slightly reworded the help message and one of the error messages.
    - cif_validate:
      - updated the script to recognise dictionaries that have a major
        version of '4' as DDLm dictionaries.
  * Deprecated:
    - COD::CIF::Data::Check:
      - the check_temperature_factors() subroutine.
      - the '--check-temperature-factors',
        '--max-year-temperature-factors-optional' and
        '--no-max-year-adp-presence-is-optional' options.
    - COD::ToolsVersion
      - the $COD::ToolsVersion::Version package variable.
  * Fixed:
    - cif_cod_check:
      - added the missing '--check-only-temperature-factors' option.
    - cif_CODify:
      - corrected the usage example.
    - cif_diff:
      - numerically compared values with standard uncertainties are
        unpacked before the comparison.
    - cif_ddlm_dic_check:
      - updated the script to recognise and skip dictionary files that
        belong neither to the 'Reference' nor to the 'Instance' dictionary
        class;
      - corrected the handling of save frames that do not contain
        the _definition.id data item;
      - a typo in one of the output messages.
    - cif_estimate_Z:
      - a typo in the script description.
    - cif_Fcalc:
      - added an explicit result output order.
    - cif_molecule:
      - a typo in a note message.
    - cif_sort_atoms:
      - optimised the reporting of unrecognised atom types.
    - codcif:
      - fixed a buffer overrun in 'cexceptions' by applying upstream patch.
    - COD::AtomProperties assembler:
      - if any of the atoms lack atomic number, compared lists are joined
        by atom chemical names in compare_properties.
    - COD::AuthorNames:
      - corrected a grammatical mistake a warning message generated
        by the parse_author_name() subroutine.
    - COD::CIF::Data::CIF2COD:
      - values 'inf', 'infinity' and 'nan' (and their capitalized
        variants) are no longer treated as numeric.
    - COD::CIF::Data::CODFlags:
      - has_partially_occupied_ordered_atoms() now unpacks CIF numbers
        before doing numerical comparisons with them;
      - has_partially_occupied_ordered_atoms() treats only occupancies
        less than 1 as partial.
    - COD::CIF::Data::SymmetryGenerator:
      - coinciding symmetry equivalents of an atom which do not coincide
        with the generating atom itself are merged in symops_apply_modulo1()
        if duplicate removal is requested.
    - COD::CIF::DDL::DDLm::Import:
      - corrected the logic that assigns loop indices during 'Content' type
        imports;
      - corrected the filenames in import error messages that are raised
        during complex import scenarios.
    - COD::CIF::Unicode2CIF:
      - removed the unofficial CIF special codes for letters 'ů' and 'Ů'
        ('\"u', '\"U');
      - updated the unicode2cif() subroutine to properly encode the '≠'
        sign as '\\neq' instead of '=&#x0338;';
      - updated most of CIF special codes with the '\\' prefix to not require
        a trailing space symbol (' '). The '\\db ', '\\tb ' and '\\ddb ' codes
        were left unchanged since IUCr explicitly specifies that they should
        be followed by a space;
      - corrected the handling of combining character sequences that contain
        several combining characters.
    - COD::UserMessage:
      - fixed parsing of messages having Unicode symbols in program and
        file names;
      - updated the parse_message() subroutine to allow the dash symbol ("-")
        in error level strings.

cod-tools (3.1.0)

  * Added:
    - COD::AtomNeighbours:
      - the neighbour_list_from_chemistry_opensmiles() subroutine;
      - the neighbour_list_from_cif() subroutine.
    - COD::CIF::Data::AtomList:
      - updated the atom property extraction logic to determine atom
        oxidation states from atom chemical types and atom names;
      - the 'exclude_hydrogens' option to the atom_array_from_cif()
        subroutine that excludes hydrogen atoms;
      - the get_atom_chemical_type() subroutine.
    - COD::CIF::Tags::Merge:
      - the 'tags' option to the merge_datablocks() subroutine to provide
        a list of data names to merge.
    - cif_filter:
      - distribution of '_publ_author_id_orcid' data item values from
        the global CIF data block to the rest of the data blocks.
    - cif_select:
      - the '--one-data-item-per-row' and '--one-data-item-per-column'
        options.
    - cif_sort_atoms:
      - the '--ascending-numerical', '--descending-numerical',
        '--ascending-lexical', '--descending-lexical' options.
  * Changed:
    - COD::CIF::DDL::DDLm::Validate:
      - the format of validation messages describing key uniqueness
        violations.
    - COD::CIF::Data::AtomList:
      - updated the datablock_from_atom_array() subroutine to add the
        '_atom_site_Cartn_*' CIF data items if orthogonal coordinates
        are present instead of the fractional ones.
    - cif_validate:
      - the format of validation messages describing key uniqueness
        violations.
    - codcif:
      - stopped storing stray CIF values in memory.
  * Deprecated:
    - COD::AtomNeighbours:
      - the neighbour_list_from_chemistry_mol() subroutine.
  * Fixed:
    - codcif:
      - updated the parsing logic to preserve empty save frames;
      - fixed a memory leak in cif_lex_buffer.c.
    - cif_compare_dics:
      - started using the UserMessage::sprint_message() subroutine
        to output dictionary comparison results in order to correctly
        escape symbols forbidden by the error message syntax.
    - cif_filter:
      - fixed a problem with global data block distribution;
      - corrected escaping of separators read from .mrk format;
      - removed possibly harmless double conversion of UTF-8 to CIF;
      - implemented conversion of XML entities to Unicode in values read
        from .mrk format.
    - cif_fix_values:
      - fixed incorrect sigma extraction routine which caused incorrect
        conversion of numbers with exponents or floating point sigma
        values.
    - cif_sort_atoms:
      - switched to relying only on the '_atom_site_type_symbol' values
        when sorting atoms by their atomic numbers;
      - updated the script to terminate upon encountering errors as was
        originally intended.
    - cif_validate:
      - updated the help message to indicate that '--die-on-errors' is
        the default option instead of '--continue-on-errors'.
    - ddlm_validate:
      - updated the help message to indicate that '--die-on-errors' is
        the default option instead of '--continue-on-errors'.
    - COD::CIF::DDL:
      - replaced Perl 'each @array' construct with a more portable
        one in cif_to_ddlm().
    - COD::CIF::DDL::DDLm::Validate:
      - replaced '\d' with '[0-9]' in several regular expressions.
    - COD::CIF::DDL::Ranges:
      - moved the handling of a Perl capture variable into a conditional
        statement in the parse_range() subroutine.
    - COD::ErrorHandler:
      - moved the handling of a Perl capture variable into a conditional
        statement in the process_errors() subroutine.
    - COD::Formulae::Print:
      - updated the formula construction logic to remove the redundant
        atom counts of '1' that were sometimes accidentally generated.
    - COD::CIF::Tags::Merge:
      - fixed merging of looped onto non-looped data items, and vice
        versa.
    - COD::CIF::Tags::Print:
      - changed CIF data type for values with carriage return ('\r')
        symbols from single-quoted strings to textfields;
      - changed quoting of CIF 2.0 table keys with carriage return ('\r')
        symbols from single-quoted strings to triple-quoted strings.
    - COD::Precision:
      - fixed unpacking of standard uncertainties with decimal dot, as
        they have to be taken as provided, without adjustments to the
        measured values.

cod-tools (3.0.1)

  * Added:
    - dependencies for Fedora 32.
  * Fixed:
    - dic2markdown:
      - updated the script to properly process DDLm dictionary save frames
        that do not contain an explicit definition class.
  * Removed:
    - dependencies:
      - Carp::Assert as a run and build dependency.

cod-tools (3.0.0)

  * Changed:
    - cif2cod:
      - header with field names is printed by default for CSV output format.
    - cif2xyz:
      - proper XYZ format with a header is produced by default.
    - cif_fix_values:
      - CIF dictionary handling interface has been changed to match the interface
        of the cif_validate script. The '--dictionaries' option has been replaced
        with the '--dictionary' and the '--add-dictionaries' option with the
        '--add-dictionary' option.
    - cif_parse:
      - the output format from the one produced by the COD::ShowStruct
        module to the one produced by the Data::Dumper module;
      - merged in the cif_printout script.
    - cif_select:
      - replaced colon (':') with double dash ('--') in messages.
    - cif_split and cif_split_primitive:
      - modified the scripts to print extracted file names
        to STDOUT instead of STDERR.
    - cif_validate:
      - validation messages are now output to STDOUT instead of STDERR.
    - COD::CIF::Data::CIF2COD, cif2cod and cif2rdf:
      - replaced values from @default_data_fields with values from
        @new_data_fields; removed @new_data_fields. As a result, cif2cod and
        cif2rdf now outputs columns of the "new" COD 'data' table schema.
    - COD::CIF::Data::SymmetryGenerator:
      - removed 'f2o' parameter from the interface of symop_generate_atoms().
    - COD::CIF::Parser::Yapp:
      - updated the parser to use the COD::CIF::Tags::Manage::new_datablock()
        subroutine in order to ensure the structure of each generated CIF
        data block structure.
    - COD::CIF::Tags::Manage:
      - allowed zero-length data block names in new_datablock() in order to
        make it compatible with the usage in COD::CIF::Parser::Yapp.
    - COD::UserMessage:
      - the interface of print_message(), sprint_message(), note(), warning(),
        error() and debug_note() subroutines.
    - COD::CIF::Data::CODNumbers:
      - stopped supporting the 'enantiomer' field in the cif_fill_data() and
        is_related_enantiomer_entry() subroutines.
    - codcif:
      - cif_lexer_set_line_length_limit() and cif_lexer_set_tag_length_limit()
        now accept and return size_t instead of int to comply with strlen().
      - split cif{,2}_lexer_set_report_long_items() into
        cif{,2}_lexer_set_report_long_tags() and unified
        cif_lexer_set_report_long_lines() methods.
      - moved lexer buffer specific code to cif_lex_buffer.c; as a result,
        the following methods are now common to both lexers:
        - cif_lexer_cleanup()
        - cif_flex_reset_counters()
        - cif_flex_current_line_number()
        - cif_flex_set_current_line_number()
        - cif_flex_current_position()
        - cif_flex_set_current_position()
        - cif_flex_current_line()
        - cif_flex_previous_line_number()
        - cif_flex_previous_position()
        - cif_flex_previous_line()
        - cif_lexer_set_line_length_limit()
    - cif2cod, cif2rdf, cif_cell_contents, cif_cod_numbers,
      COD::CIF::Data::CIF2COD and COD::CIF::Data::CellContents:
      - attached hydrogen atoms are included in formula calculation by default.
    - COD::Algebra::GaussJordan:
      - Default epsilon factor from 2 to 8.
  * Removed:
    - the cif_parse_old_star script.
    - the cod_predeposition_check script.
    - the cif_printout_Python script.
    - the COD::CIF::Data::CODPredepositionCheck module.
    - the COD::ShowStruct module.
    - STAR::Parser sources.
    - COD::AtomNeighbours:
      - the deprecated neighbour_list_from_chemistry_openbabel_obmol()
        subroutine.
    - sdf_add_cod_data:
      - the deprecated '--tmp-dir' option.
    - cif_printout:
      - the deprecated '--output-struct' option;
      - merged the script into cif_parse.
    - cif_validate:
      - support for DDL2 dictionaries;
      - the deprecated '--ddl2-dictionaries', '--ddl2-add-dictionary',
        '--ddl2-clear-dictionaries' options;
      - the deprecated '--debug' option.
    - codcif:
      - unused functions process_escapes(), strclone(), strnclone(),
        strappend() and translate_escape().
    - cif_Fcalc:
      - the deprecated '--dump-xyz-coordinates', '--dump-Cromer-Mann',
        '--dump-cell-parameters', '--dump-cell-xyz-coordinates',
        '--dump-sorted-F', '--dump-atoms-and-neighbors', '--dump-test-Fhkl'
        options.
    - COD::Algebra::GaussJordan:
      - the deprecated backward_elimination() subroutine.
    - COD::Algebra::GaussJordanBigRat:
      - the deprecated backward_elimination() subroutine.
  * Fixed:
    - codcif:
      - added casts to avoid comparisons of integer expressions of
        different signedness.

cod-tools (2.13)

  * Added:
    - the COD::CIF::DDL::DDLm module;
    - the COD::CIF::DDL::DDLm::Import module;
    - the COD::CIF::DDL::DDLm::Validate module;
    - the 'cif_compare_dics' script;
    - the 'cif_ddl1_dic_check' script;
    - the 'cif_ddlm_dic_check' script;
    - the 'cif_ddlm_dic_print' script;
    - the 'ddl1-to-ddlm' script;
    - the 'ddlm_validate' script;
    - COD::AtomNeighbours:
      - the neighbour_list_to_cif_datablock() subroutine.
    - COD::CIF::Data::CODFlags:
      - the has_partially_occupied_ordered_atoms() subroutine.
    - COD::CIF::Data::ExcludeFromStatistics:
      - the 'has_partially_occupied_ordered_atoms' option to
        the exclude_from_statistics() subroutine.
    - cif_find_duplicates:
      - the '--use-attached-hydrogens' option.
    - COD::CIF::DDL:
      - the cif_to_ddlm() subroutine;
      - the ddl1_to_ddlm() subroutine.
    - COD::CIF::DDL::Validate:
      - the canonicalise_tag() subroutine.
    - cif_validate:
      - the '--range-su-multiplier' option;
      - the '--ddl1-add-dictionary', '--ddl1-dictionaries',
        '--ddl1-clear-dictionaries' options;
      - the '--ddl2-add-dictionary', '--ddl2-dictionaries',
        '--ddl2-clear-dictionaries' options;
      - the '--ddlm-add-dictionary', '--ddlm-dictionaries',
        '--ddlm-clear-dictionaries' options;
      - the '--add-ddlm-import-path' and '--clear-ddlm-import-path' options;
      - the '--report-missing-su' and '--no-report-missing-su' options.
    - dic2markdown:
      - CIF to dictionary conversion;
      - internal cross-references;
      - support for examples.
  * Changed:
    - COD::CIF::Data::AtomList:
      - updated the datablock_from_atom_array() subroutine to ignore
        missing atom information.
    - COD::CIF::DDL::Ranges:
      - updated the is_in_range() subroutine to accept an optional
        multiplier that should be applied to the standard uncertainty (s.u.)
        when determining if a numeric value resides in the specified range.
    - cif_cod_numbers:
      - added explicit default option values to the script instead of
        relying on the default values of the COD::CIF::Data::CODNumbers
        module.
    - cif_validate:
      - added support for DDLm dictionaries.
    - dic2markdown:
      - updated a warning message.
  * Deprecated:
    - cif_validator:
      - support for DDL2 dictionaries;
      - the '--ddl2-dictionaries', '--ddl2-add-dictionary' and
        '--ddl2-clear-dictionaries' options.
  * Fixed:
    - cif2xyz:
      - options '--do-not-add-xyz-header', '--dont-add-xyz-header' and
        '--no-add-xyz-header' did not work as expected;
    - cif_find_duplicates:
      - updated the handling of the '--use-sigma', '--no-use-sigma'
        and synonymous options to actually enable or disable the
        related functionality.

cod-tools (2.12)

  * Added:
    - COD::AtomNeighbours:
      - the neighbour_list_to_graph() subroutine.
    - COD::CIF::Data::CODNumbers:
      - allowing passing an option to include attached hydrogens in formula
        calculation (off by default).
    - cif_cod_numbers:
      - the '--use-attached-hydrogens' option.
  * Fixed:
    - codcif:
      - properly reporting CIF save_ frames outside data blocks.
    - cif_overlay:
      - fixing description of atom_rms() subroutine.

cod-tools (2.11)

  * Added:
    - COD::Algebra::GaussJordan:
      - the gj_elimination() subroutine;
      - the gj_elimination_non_zero_elements() subroutine;
      - the back_substitution() subroutine which fully replaces
        the deprecated backward_elimination() subroutine;
    - the COD::Algebra::GaussJordanBigRat module which serves as a drop-in
      replacement for the COD::Algebra::GaussJordan module, but uses BigRat
      rational number arithmetic instead of the floating point arithmetic;
    - COD::CIF::DDL:
      - the get_category_name_from_local_data_name() subroutine.
    - COD::CIF::DDL::DDL1:
      - the classify_dic_blocks() subroutine;
      - the get_data_name() subroutine;
      - the get_data_names() subroutine;
      - the convert_pseudo_data_name_to_category_name() subroutine.
    - cif_validate:
      - the '--merge-ddl1-dictionaries' and '--no-merge-ddl1-dictionaries'
        options.
    - COD::CIF::Tags::Excluded:
      - several more data names to the exclusion list.
  * Changed:
    - cif_molecule:
      - replaced subroutine calls to the COD::Algebra::GaussJordan module
        with subroutine calls to the COD::Algebra::GaussJordanBigRat module.
    - cif_validate:
      - updated the dictionary handling logic to merge all DDL1
        dictionaries into a single virtual dictionary;
      - updated validation messages involving enumeration values
        to contain single quotes around each of the reported enumeration
        values.
    - COD::CIF::DDL::Ranges:
      - updated the range_to_string_char() subroutine to add single
        quotes around the range limits.
    - molcif2sdf:
      - replaced call to 'babel' with 'obabel' to be compatible with
        all versions of Open Babel.
  * Deprecated:
    - COD::Algebra::GaussJordan:
      - the backward_elimination() subroutine.
    - COD::Algebra::GaussJordanBigRat:
      - the backward_elimination() subroutine.
  * Fixed:
    - cif_molecule:
      - the polymer basis determination logic.
    - COD::CIF::Data::Check:
      - fixed a typo in a warning message generated by the
        check_formula_sum_syntax() subroutine.
    - corrected a typo in the 'cif_CODify', 'cif_cod_deposit', 'codcif2sdf',
      'molcif2sdf' and 'sdf_add_cod_data' scripts.

cod-tools (2.10)

  * Added:
    - cif_validate:
      - a check that reports looped lists containing data items from more
        than one dictionary category;
      - a check that reports unique loop key violations;
      - a check that reports missing mandatory looped list data items.
    - COD::CIF::DDL::DDL1:
      - the get_category_name() subroutine;
      - the get_list_mandatory_flag() subroutine.
  * Changed:
    - cifvalues:
      - updated the help message.
    - cif_validate:
      - reworded a validation message to explicitly state that the composite
        loop reference requires collectively unique values;
      - updated the way validation messages are generated to ensure that
        the canonical form of data item names is used regardless of the
        underlying data structure.
    - COD::CIF::Data::CIF2COD:
      - implemented the handling of the 'gofref' column.
    - COD::CIF::Tags::DictTags:
      - added data item names from the 'cif_core_restraint.dic'
        and the 'cif_twinning.dic' CIF dictionary to the global
        '@tag_list' variable.
  * Removed:
      - the 'database-schemas/cif2cod.sql' file.
  * Fixed:
      - cif_list_tags:
        - a typo in an option name ('--vebose' to '--verbose').
      - COD::CIF::Data::CIF2COD:
        - changed the data item set from which the value for the 'gofobs' column
          is retrieved from ['_refine_ls_goodness_of_fit_ref'] to
          ['_refine_ls_goodness_of_fit_gt', '_refine_ls_goodness_of_fit_obs'].

cod-tools (2.9)

  * Changed:
    - COD::CIF::Data::CIF2COD:
      - updated the validate_SQL_types() subroutine to return an undef
        value instead of a value that is not compatible with the specified
        SQL CHAR/VARCHAR field;
      - updated the cif2cod() subroutine to determine the number of elements
        from the calculated formula instead of defaulting to '0' when the
        summary formula is not explicitly provided;
      - updated the text of several warning messages.
  * Fixed:
    - COD::CIF::Data::CIF2COD:
      - updated the calculate_formula_sum() subroutine to return an undefined
        value instead of a string consisting of question marks and digits
        when processing CIF files with unknown ('?') coordinate values.
      - updated the calculate_formula_sum() subroutine to return an undefined
        value instead of a decorated empty string ('-  -') when processing
        CIF files with inapplicable ('.') coordinate values.

cod-tools (2.8)

  * Added:
    - COD::CIF::Data::CIF2COD:
      - several warning messages informing about unrecognised COD error flag
        values or unrecognised COD issue severity values.
    - COD::CIF::Data::CODNumbers:
      - the 'related_enantiomer_entries' field to the data structure that
        is returned by the 'cif_fill_data' subroutine and used by other
        subroutines in the same module. The 'related_enantiomer_entries'
        field serves as a replacement for the 'enantiomer field and is
        capable of properly storing looped references to enantiomer entries.
    - codcif:
      - implemented parsing CIF from string.
  * Changed:
    - codcif:
      - unified the reaction to forbidden CIF v1.1 and v2.0 symbols
        across the lexers of different CIF versions.
    - COD::CIF::Data::CODFlags:
      - updated the is_duplicate(), is_on_hold(), is_theoretical(),
        has_Fobs(), is_suboptimal(), has_warnings(), has_errors() and
        is_retracted() subroutines to take into consideration data items
        that were introduced in DDL1 'cif_cod.dic' dictionary version 0.040.
    - COD::CIF::Data::CIF2COD:
      - updated the cif2cod() subroutine to take into consideration data items
        that were introduced in DDL1 'cif_cod.dic' dictionary version 0.040;
    - COD::CIF::Data::CODNumbers:
      - updated the cif_fill_data() and entries_are_the_same() subroutines
        to take into consideration data items that were introduced in
        DDL1 'cif_cod.dic' dictionary version 0.040.
  * Deprecated:
    - COD::CIF::Data::CODNumbers:
      - the 'enantiomer' field in the data structure that is returned
        by the cif_fill_data() subroutine and used by other subroutines
        in the same module.
  * Fixed:
    - codcif:
      - non-orthogonal flag bits were used in CIF_FLEX_LEXER_FLAGS enum;
      - capitalization of 'ASCII' (was 'ascii') in error/warning messages.
    - cif_validate:
      - corrected a typo in a warning message.
    - COD::CIF::Data::CODFlags:
      - corrected the 'is_suboptimal' subroutine to properly evaluate
        the values of relevant data items.
    - COD::CIF::Data::CIF2COD:
      - updated the cif2cod() subroutine to return an undefined value
        for the 'status' column in case an unsupported enumeration value
        is encountered in the input file (i.e. 'note').

cod-tools (2.7)

  * Added:
    - COD::SUsage:
      - several error messages informing about non-zero exit status
        while opening or closing files.
    - cif2cod:
      - the --no-reformat-space-group option as a synonym for
        the --leave-space-group option.
    - cif2rdf:
      - the --no-reformat-space-group option as a synonym for
        the --leave-space-group option.
    - COD::CIF::Tags::COD:
      - all data names that were introduced in DDL1 'cif_cod.dic' dictionary
        version 0.040.
  * Changed:
    - cif_distances:
      - slightly reworded the help message.
    - cif_list_tags
      - updated the layout of the help message.
    - cifparse:
      - updated the layout of the help message.
    - cifvalues:
      - updated the layout of the help message.
    - cif2cod:
      - hard coded the default values of some of the options instead of
        depending on the default values of the COD::CIF::Data::CIF2COD::cif2cod()
        subroutine.
    - cif2rdf:
      - hard coded the default values of some of the options instead of
        depending on the default values of the COD::CIF::Data::CIF2COD::cif2cod()
        subroutine.
    - help2man:
      - updated the script to no longer generate the OPTIONS section
        with the placeholder text if the actual options are not described;
      - updated the script to print program names in man pages using upper case;
      - updated the script to mark all generated man pages as belonging to
        manual section 1.
  * Fixed:
    - updated the USAGE section of multiple scripts to follow the syntax
      that is properly handled by the 'help2man' script;
    - codcif:
      - updated the parser to detect and report forbidden vertical
        tabulation (VT) and form feed (FF) control characters;
      - updated the parser to report CIF data names consisting of a single
        underscore;
      - added a termination condition to an otherwise endless loop in CIF2 lexer;
      - optimized detection and reporting of control characters.
    - cif_fix_values:
      - updated several warning messages to not capitalise the word
        "Kelvin" where it refers to the units of measurement.
    - cif2cod:
      - updated the handling of the --exclude-keywords-with-undefined-values
        option so it no longer triggers an opposite effect than expected.
    - cif2rdf:
      - updated the handling of the --reformat-space-group,
        --dont-reformat-space-group, --leave-space-group options
        so they are no longer ignored.
    - COD::SUsage:
      - updated the options() and usage() subroutines to properly
        use the script name that is passed as an argument instead
        of relying on the value of the '$0' Perl variable.
    - help2man:
      - updated the program name resolving logic to properly handle
        program calls with multiple input files.

cod-tools (2.6)

  * Added:
    - cif_molecule:
      - polymer basis string was added to the output (respective tag
        '_cod_molecule_polymer_basis');
      - the --special-disorder-operator-set, --random-seed options and
        --vdw-distance-factor options.
    - COD::Algebra::GaussJordan:
      - the module itself;
      - 'backward_elimination()' for polymer basis string calculation.
    - COD::AtomNeighbours:
      - the get_max_vdw_radius() subroutine.
  * Changed:
    - cif_molecule:
      - updated the polymer handling logic to always explicitly mark
        molecule as non-polymeric when the molecule is not a polymer
        ('_cod_molecule_is_polymer' data item is set to 'no');
      - updated the polymer handling logic to suppress additional
        polymer information when '--max-polymer-span' is set to '0'.
        Suppressed data items include '_cod_molecule_polymer_dimension'
        and '_cod_molecule_polymer_basis';
      - modified the handling of atom disorder around a special position.
        The logic was updated to determine symmetry of atom groups that
        are disordered around a special position and apply only
        crystal symmetry operators from cosets of this symmetry group
        to the disordered atom group;
      - changed the default option from --no-use-special-disorder-symmetry
        to --use-special-disorder-symmetry;
    - COD::CIF::Data::CODNumbers:
      - adding two dashes ('--') to a warning message generated in
        the cif_fill_data() subroutine.
    - COD::CIF::Data::SymmetryGenerator:
      - modified the test_bump() subroutine to accept an optional parameter
        specifying the type of atomic radii that should be used;
      - renamed an option in the symops_apply_modulo1() subroutine from
        'disregard_symmetry_independent_sites' to
        'use_special_position_disorder'.
    - COD::AtomProperties:
      - the van der Waals radius of the hydrogen atom from 1.09 to 1.2.
    - cif_validate:
      - updated the script to apply the max message limit only after
        the validation messages have been summarised.
    - pycodcif:
      - added README.rst as extended description of the Python package.
  * Deprecated:
    - COD::AtomNeighbours:
      - neighbour_list_from_chemistry_openbabel_obmol() method.
  * Fixed:
    - test outputs for codcif2sdf and molcif2sdf;
    - corrected a typo 'succesfully' -> 'successfully';
    - codcif:
      - adjusted signed and unsigned integer types in cif_grammar.y,
        cif2_grammar.y and datablock.c;
      - fixed a memory leak due to non-free()d buffers;
      - fixed issue with quadratic performance with large non-CIF files;
      - correctly detecting EOF in non-CIF binary files;
      - checking whether a pointer is not null before printing it.
    - pycodcif:
      - updated the parser to convert incorrect UTF-8 bytes to U+FFFD
        for Python 3.
    - COD::CIF::Data::SymmetryGenerator:
      - updated the chemical_formula_sum() subroutine to return the chemical
        formula of a single unit cell when dealing with polymers.

cod-tools (2.5)

  * Added:
    - cif_molecule:
      - command line option to turn off special treatment of disorder groups
        with negative indices;
      - warning about the unity symmetry operation not being the first one
        on the symmetry operation list.
    - cif_validate:
      - checking if data items from the same category reside in the same loop;
      - reporting of missing parent data items;
      - the --allow-double-precision-notation and
        --no-allow-double-precision-notation options;
      - the --no-report-deprecated option as an alias of the
        --ignore-deprecated option.
      - the --max-message-count option.
    - COD::AuthorNames:
      - author_names_are_the_same() subroutine.
    - COD::CIF::DDL::DDL1:
      - the get_list_constraint_type() and get_dic_item_value() subroutines.
    - COD::CIF::Data::AtomList:
      - a warning about data items used in the construction of the atom
        structure not residing in the same loop;
    - COD::CIF::Tags::Manage:
      - the get_item_loop_index() subroutine;
    - COD::Spacegroups::Symop::Algebra:
      - the snap_to_crystallographic() subroutine;
      - the symops_are_equal() subroutine.
    - COD::Spacegroups::Builder:
      - the debug() method;
      - the check_inversion_translation() method;
      - the sub has_translation() method.
    - the COD::Spacegroups::SimpleBuilder module;
    - symop_build_spacegroup:
      - the '--use-optimised-spacegroup-builder' and
        '--use-simple-spacegroup-builder' options;
      - the '--debug' and '--no-debug' options.
    - cif_molecule:
      - the '--use-optimised-spacegroup-builder' and
        '--use-simple-spacegroup-builder' options;
      - several additional warning messages.
    - several space group and symmetry operation oriented scripts:
      - cosets;
      - syminv;
      - symmul;
      - symops;
    - setup-perl-paths.sh tool;
  * Changed:
    - COD::CIF::Parser::Bison:
      - marking strings as UTF-8 using low-level Perl API to improve the
        performance.
    - cif_validate:
      - updated the range validation logic to always consider the standard
        uncertainty (s.u.) values even if the data item is not formally
        eligible to have an associated s.u. value.
    - sdf_add_cod_data:
      - updated the script to output COD URLs with the HTTPS protocol.
    - molcif2sdf:
      - updated the script to output COD URLs with the HTTPS protocol.
    - cif_molecule:
      - replaced the term 'symmetry operator' with the term 'symmetry operation'
        in error messages dealing with symmetry.
    - COD::CIF::Data:
      - replaced the term 'symmetry operator' with the term 'symmetry operation'
        in error messages dealing with symmetry.
    - COD::CIF::Data::AtomList:
      - the 'extract_atom' subroutine was updated to process an additional
        optional parameter that specifies a list of data items that should
        be used in the construction of the atom data structure;
      - the 'atom_array_from_cif' subroutine was updated to raise an error
        in case a CIF data structure with no fractional coordinates is provided;
    - cif_printout:
      - added a warning message about the deprecated output format.
    - cif_parse_old_star:
      - added a warning message about the deprecated output format.
    - COD::Serialise:
      - updated multiple subroutines to accept an optional filehandle parameter.
    - COD::Spacegroups::Builder:
      - updated the print() method to accept an optional filehandle parameter.
  * Deprecated:
    - cif_parse_old_star:
      - the output format.
  * Fixed:
    - cif2cod:
      - escaping double quotes in 'text' fields in semicolon-separated
        output format.
    - cif_molecule:
      - removed duplicated option description.
    - cif_validate:
      - corrected the way character ranges are handled.
    - COD::ShowStruct:
      - corrected the way undefined hash values are handled.
    - COD::CIF::Data::AtomList:
      - the 'extract_atom' subroutine was updated to correctly handle
        input files that contain the '_atom_site_type_symbol' data item
        with both regular and special values (i.e. '?').
    - COD::Spacegroups::Builder:
      - implemented proper handling of rhombohedral space groups.

cod-tools (2.4)

  * Added:
    - COD::CIF::ChangeLog module.
    - COD::CIF::DDL module.
    - COD::CIF::DDL::DDL1 module.
    - COD::CIF::Tags::Manage:
      - accepting CIF format version number in new_datablock();
      - the 'contains_data_item()' subroutine.
    - data/replacement_values/replacement_values.lst
      - several more value replacement rules.
    - cif_tags_in_list:
      - the --exclude-category-names option;
    - cif_validate:
      - a validation message pertaining to quote usage in combination with
        numeric values;
      - a uniqueness constraint check for simple and composite loop references.
  * Changed:
    - COD::AuthorNames:
      - updated several error messages to only display the original author name
        without any modifications;
    - COD::CIF::Data:
      - slightly reworded several warning messages.
    - COD::CIF::Data::AtomList:
      - rewritten dump_atoms_as_cif() using standard CIF printing routines;
      - updated several warning messages.
    - COD::CIF::Data::Check:
      - replaced a composite warning message pertaining to bibliography-related
        data items with several messages of greater specificity.
    - COD::CIF::Parser::Yapp:
      - replaced the COD::ShowStruct module with Data::Dumper
        for debug prints.
    - dropped test-dependency on 'mysql' command line utility.
    - cif_validate:
      - slightly reworded several validation messages.
    - cif_cod_check:
      - slightly reworded several warning messages.
    - cif_correct_tags:
      - slightly reworded several warning messages.
    - cif_fix_values:
      - updated the text of multiple log and warning messages.
    - Relicensed to LGPL-3.
  * Deprecated:
    - cif_printout:
      - the --output-struct option.
    - cif_parse:
      - the output format.
    - COD::ShowStruct.
  * Fixed:
    - COD::CIF::Data::Check:
      - added a missing space symbol in an error message.
      - ceasing to require diffractogram and phase block links in the
        overall powder diffraction block if they are the same.
    - COD::CIF::Data::AtomList:
      - using '_space_group_name_H-M_alt' data item instead of deprecated
        '_symmetry_space_group_name_H-M' in dump_atoms_as_cif().
    - COD::CIF::Parser::Bison:
      - distributing parent data block's 'cifversion' to its save blocks
        recursively.
    - COD::CIF::Tags::Print:
      - resolving an issue with printing of CIF2 tables inside CIF2 lists
        in cif_print();
      - printing CIF save frames in cif_print().
    - cif2cod:
      - description of command line option --use-all-datablocks.
    - cif2ref and cif_filter:
      - standardising symmetry data item recognition.
    - cif_filter:
      - non-numeric space group numbers no longer raise warnings in
        combination with the '--estimate-spacegroup' option.
    - cif_molecule, cif_p1, cif_reduce_Niggli and oqmd2cif:
      - adding '_space_group_name_*' to the output instead of deprecated
        '_symmetry_space_group_name_*';
    - cif_split:
      - appending mode;
      - writing of Unicode symbols to resulting splitted files.
    - codcif:
      - no longer allowing '[dD]' symbols in CIF numbers;
      - requiring closing braces of CIF2 tables and lists be followed by
        other closing braces or whitespace;
      - allowing opening and closing braces in data_ and save_ block names.
    - replaced 'can not' with 'cannot' in all affected scripts and modules;
    - replaced the '\d' group with explicit '[0-9]' in regular expressions
      in all affected scripts and modules.

cod-tools (2.3)

  * Added:
    - cif2xyz:
      - command line option --add-xyz-header to produce XYZ format as
        defined in http://openbabel.org/wiki/XYZ_%28format%29.
    - cif_cod_check:
      - the --check-pd-block-relations and its inverse options that control
        the execution of checks related to powder diffraction blocks.
    - cif_filter:
      - the --exclude-placeholder-tags, --placeholder-tag-list options
        and a related subroutine that enables the removal of data items
        with placeholder values.
      - the --exclude-redundant-chemical-names option and a related
        subroutine that enables the removal of data items related to
        chemical names that contain redundant values.
    - cif_fix_values:
      - removing URL and doi: prefixes from the values of CIF data items
        that are supposed to hold DOIs.
    - cif_hkl_check:
      - performing powder diffraction checks.
    - cif_molecule and cif_p1:
      - prefix for preserved original CIF data items was changed from
        '_cod_src_' to '_[local]_cod_src_'.
    - cif_validate:
      - reporting non-looped CIF data items occurring in CIF loops.
      - reporting existence of both replaced and replacing data items in
        the same CIF data block.
      - single quotes are now used to delimit both the data names and the
        data values in validation messages;
      - updating the standard uncertainty validation logic to ignore
        non-numeric values;
      - slightly rewording some of the validation messages.
    - COD::CIF::Data:
      - the get_formula_units_z() subroutine.
    - COD::CIF::DDL::Validate module.
    - COD::DateTime:
      - the 'canonicalise_timestamp()' subroutine.
    - COD::Spacegroups::Lookup::COD:
      - the 'F d 1 1' space group description;
      - the 'F 1 d 1' space group description;
      - the 'F 1 1 d' space group description;
      - the 'C 1 c 1 (a-3/8,b-3/8,a+2*c)' space group description;
      - the 'F 1 2/d 1'  space group description.
    - Test dependencies for CentOS-6.8.
  * Changed:
    - cif_cod_check:
      - modifying the warning message about missing authors to use the same
        format as other warnings about missing data items;
      - replacing test case 'cif_cod_check_111' with test case
        'cif_cod_check_115' since test case 'cif_cod_check_111' was a
        duplicate of 'cif_cod_check_107'.
    - cif_eval_numbers:
      - modified the script to no longer use inline eval() and instead use
        ad hoc logic to handle known numeric operations;
      - updated the help message.
    - cif_fix_values:
      - updating the built-in CIF Core dictionary from version 2.4.1 to 2.4.5;
      - detecting value 'direct_method' as 'direct' for data items
        _atom_sites_solution_{primary,secondary,hydrogens};
      - ceasing to use regular expressions for comparisons of strings
        as metasymbols in strings might disrupt the program;
      - updated the help message to correctly state that only DDL1 CIF
        dictionaries are currently handled.
    - cif_select:
      - ceasing to convert dots ('.') to underscores ('_') in data item names
        by default.
    - cif_validate:
      - updating the dictionary building logic to take default DDL1 values into
        account;
      - numeric data items with non-numeric values no longer cause
        range violated messages;
      - validation messages related to loop references no longer output
        the dictionary name.
    - COD::CIF::Data::Check:
      - modifying the check_author_names() subroutine to no longer raise
        warnings about missing _publ_author_name data items;
      - check_bibliography() treats data items with values '?' as unknown.
    - COD::CIF::Data::CIF2COD:
      - the module no longer returns empty strings instead of NULL values
        for the author and title fields;
      - modifying the Z value handling logic to use the get_formula_units_z()
        subroutine and to try to estimate the Z value from other data items
        in cases when it is malformed or not provided;
      - the calculated cell volume is now reused in other calculations
        instead repeatedly calculating it.
    - COD::CIF::Data::EstimateZ:
      - the cif_estimate_z() subroutine now accepts optional parameters
        that override the data values provided in the CIF data block.
    - COD::Spacegroups::Lookup::COD:
      - renaming space group 'P 1 (-a,-b+c,b+c)' to 'A 1';
      - renaming space group 'P 1 (-a+c,-b,a+c)' to 'B 1';
      - renaming space group 'P 1 (b+c,a+c,a+b)' to 'I 1';
      - replacing the Hall space group symbol with a shorter one for
        space groups from the extra_settings hash.
    - COD::UserMessage:
      - the space (" ") symbol occurring in program name field is no longer
        escaped;
      - the newline ('\n') symbol and various braces ('[', ']', '(', ')',
        '{', '}') are now escaped in the program name and filename fields;
      - the tab ('\t') symbol is now escaped in the filename field.
  * Deprecated:
    - cif_validate:
      - the --debug option.
    - cif_Fcalc:
      - the '--dump-xyz-coordinates', '--dump-Cromer-Mann',
        '--dump-cell-parameters', '--dump-cell-xyz-coordinates',
        '--dump-sorted-F', '--dump-atoms-and-neighbors',
        '--dump-test-Fhkl' options.
  * Removed:
    - cif_cod_check:
      - unused COD::CIF::Tags::Manage::tag_is_empty() import.
    - COD::CIF::Data::CODNumbers::have_equiv_timestamps:
      - unused DateTime::Format::RFC3339 import.
    - COD::CIF::Tags::COD:
     - removing the _cod_superseeded_by, _cod_published_source and
       _cod_est_spacegroup_name_H-M tags since the associated data items
       were never used nor properly defined in the dictionary.
  * Fixed:
    - cif_cod_check:
      - updating the author name handling logic by introducing an additional
        call of the 'clean_whitespaces' subroutine for each name;
      - indicating in the help message that 'die on errors' mode is default
    - cif_eval_numbers:
      - non-ASCII digits are no longer recognised as digits.
    - cif_filter:
      - corrected several typos in the help message.
    - cif_fix_values:
      - correcting a typo in the message counting subroutine;
      - looped temperature, density and refinement weighting scheme values
        no longer produce a malformed CIF file.
    - cif_molecule:
      - updating the error handling logic to properly recognise empty arrays.
    - cif_select:
      - ceasing to overwrite existing data names;
      - ceasing to print duplicated data names.
    - cif_validate:
      - quoting metasymbols in enumeration values before putting them in
        regular expressions;
      - fixing typo in deprecation messages;
      - corrected a typo in the help message.
    - cifvalues:
      - correcting detection of empty CIF files.
    - codcif:
      - not detecting single underscores ('_') as CIF data names;
      - correctly processing CIF2 table entry values starting with
        colons (':');
      - no longer reporting CIF comments without a newline symbol as errors
    - dic2markdown:
      - correcting a typo in an error message.
    - pycodcif:
      - executing 'swig' to build Python module prior to installing all
        Python modules thus removing the need for repeated build;
      - fixing source distribution generation;
      - fixing Python3 compile time warnings.
    - sdf_add_cod_data:
      - correcting the regular expression that filters out chemical names
        to take the potential whitespace prefix into account.
    - COD::CIF::Data::Check:
      - unnecessarily strict powder diffraction data checks in
        check_pdcif_relations().
    - COD::CIF::Parser::Yapp:
      - correctly dealing with horizontal tabulations in fix mode;
      - replacing hard-coded module version 1.0 with actual cod-tools
        package version.
    - COD::CIF::Tags::Manage:
      - improving the logic to handle data name overwriting;
      - preventing from creation of data blocks with disallowed names.
    - COD::DateTime:
      - switched from '\d' to '[0-9]' in regular expressions to match
        digits in dates.
    - COD::Formulae::Parser::AdHoc:
      - updated the error handling logic to raise the warn signal instead
        of printing directly to STDERR.
    - replacing 'tree' with 'find' in tests for cif_tcod_tree.
    - fixing issues with parallel building.

cod-tools (2.2)

  * Added:
    - COD::AtomNeighbours: adding subroutine
      neighbour_list_from_chemistry_openbabel_obmol() for the
      construction of atom neighbours data structure from the object
      of Chemistry::OpenBabel::OBMol Perl module.
    - COD::AuthorNames: adding the get_name_syntax_description()
      subroutine.
    - COD::CIF::Data:
      - adding get_sg_data() subroutine.
      - adding get_source_data_block_name() subroutine.
    - COD::CIF::Data::AtomList:
      - adding datablock_from_atom_array() to ease the conversion of
        atom list data structure to CIF;
      - adding generate_cod_molecule_data_block() subroutine.
    - COD::CIF::Data::Check module.
    - COD::CIF::Data::EstimateZ: adding a warning message about the
      inability to calculate the cell volume in the get_volume()
      subroutine.
    - COD::CIF::DDL::Ranges module.
    - COD::CIF::Tags::COD: adding all the data names that were defined
      in the cif_cod.dic version 0.035.
    - COD::CIF::Tags::Manage:
      - has_unknown_value() subroutine;
      - has_inapplicable_value() subroutine;
      - has_special_value() subroutine;
      - has_numeric_value subroutine;
      - get_data_value() subroutine;
      - get_aliased_value() subroutine;
      - cifversion() subroutine.
    - COD::CIF::Tags::Merge module with CIF data block merging code.
    - COD::DateTime module.
    - COD::Spacegroups::Lookup::COD:
      - adding the '-P 2yb (x,y+1/4,z)' space group description;
      - adding the 'F 41/a d c' space group description;
      - adding the 'B 1 21/d 1' space group description;
      - adding the 'P -2yabc' space group description;
      - adding the 'P 2ybc' space group description;
      - adding the 'C -4 2 b' space group description.
    - cif_fillcell: --merge-special-positions command line option.
    - codcif:
      - building and installing shared library.
      - cif_append_datablock() method.
      - value_type_from_string_1_1() function.
      - value_type_from_string_2_0() function.
      - unpack_precision() function.
    - cod_manage_related script.
    - dic2markdown script.
    - pycodcif: experimental object-oriented interface.
    - Build and run dependencies for Fedora-28.
  * Changed:
    - Changing the error messages regarding unrecognised space groups
      to match those raised by the
      COD::CIF::Data::get_symmetry_operators() subroutine.
    - COD::AuthorNames::parse_author_name(): treating leading and
      trailing spaces in author names separately to issue less
      misleading error messages about space symbols not permitted in
      author names.
    - COD::CIF::Tags::Manage: changing the way set_loop_tag() behaves
      when incorrect parameters are passed.
    - COD::CIF::Tags::Print: simplifying the interface of the
      print_loop() subroutine.
    - Removed a conditional dealing with an undefined data block name
      from multiple scripts.
    - cif_validate: changing the way numeric enumeration ranges are
      displayed in audit messages.
    - COD::CIF::Parser::Bison and pycodcif: using unpack_precision()
      function to extract precisions from numeric CIF values.
    - pycodcif:
      - throwing CifParserException instead of exiting.
      - switching to Python setuptools-based build and install system.
    - COD::CIF::Data::CODNumbers: adding 'have_equiv_lattices',
      'have_equiv_bibliographies', 'have_equiv_timestamps',
      'have_equiv_category_values' and 'build_entry_from_db_row' to
      the list of exported subroutines.
    - COD::CIF::Data::SymmetryGenerator: adding 'shift_atom' to the
      list of exported subroutines.
    - cif_fillcell:
      - modifying the output to always contain the '_atom_site_label'
        data item values.
      - modifying the output to encode the symop and translation
        information in atom names in a more standard way.
    - cif_find_symmetry: flushing zeros in the output coordinates.
    - replacement_values.lst: adding new replacement rules.
    - codcif: requalifying warnings about unallowed symbols in CIF 1.1
      comments as notes in fix mode.
    - cif_Fcalc: simplifying the code through the use of more standard
      code constructions and subroutines.
    - simplifying Makefile rules for building and installing.
    - COD::SPGLib:
      - switching to spglib v1.9.9.
      - rewriting the code to use only exported functions of spglib.
    - COD::Spacegroups::Lookup::COD:
      - renaming space group 'P 1 (-a+b+c,a-b+c,a+b-c)' to 'F 1';
      - renaming space group 'P -1 (-a+b+c,a-b+c,a+b-c)' to 'F -1'.
  * Deprecated:
    - usage of COD::CIF::Data::CODPredepositionCheck and
      cod_predeposition_check. The code is underdeveloped, duplicates
      cif-deposit.pl, yet it does not serve the purpose in the COD
      database.
  * Removed:
    - COD::SPGLib: function get_spacegroup(), which has never worked
      as expected, and was superseded by get_sym_dataset().
  * Fixed:
    - COD::Spacegroups::Lookup::COD:
      - correcting the 'ncsym' field in the description of the
        '-P 2yb (1/2*x,y,-1/2*x+z)' space group;
      - correcting space group information of the 'R 1 2/c 1' space
        group.
    - sdf_add_cod_data: modifying the script to no longer create
      useless temporary directories.
    - cif_tcod_tree: using CIF value type to detect special CIF values
      '?' and '.'.
    - COD::CIF::Tags::Manage: deleting old data item values upon the
      call of set_loop_tag() subroutine in order to avoid conflicting
      data.
    - COD::CIF::Data::AtomList: modifying the atom_groups() subroutine
      to treat undefined and unknown ('?') occupancy values as being
      equal to '1'.
    - cif_cod_check:
      - Adding missing descriptions of the '--check-bibliography',
        '--require-only-doi', '--require-full-bibliography',
        '--check-all' and '--check-none' options.
      - Restructuring the code so that error messages about empty
        files are properly issued.
    - COD::CIF::Data::CIF2COD: adding missing parentheses in the
      'cif2cod()' subroutine.
    - COD::CIF::Data::CODNumbers:
      - Correcting the bibliography handling logic to use case
        insensitive string comparison.
      - Correcting the bibliography handling logic to not compare the
        journal names.
    - codcif: possible memory leak in datablock_overwrite_cifvalue().
    - pycodcif:
      - Converting Unicode file names to string before processing.
      - Fixing incorrect braces in dictionary member access.
      - Fixing incorrect precision conversion for values with capital
        E letter in their representation.
    - COD::CIF::Parser::Bison and pycodcif: resetting lexer flags
      between subsequent parser runs.
    - cif_fillcell: correcting the numbering of the symmetry operators
      in atom names to start from '1' and not '0'.
    - cif_filter:
      - correcting CIF-encoding of user-supplied bibliography values
        for both CIF 1.1 and CIF 2.0.
      - replacing ad-hoc datablock generation by result of proper
        new_datablock() function.
    - Adding 'openbabel' from 'epel' repository to CentOS-6.8/run.sh
      dependency list.
    - cif_split and COD::CIF::Data::CIF2COD: handling of Unicode
      symbols in CIF 2.0.
    - cif_dictionary_tags: listing data items of DDLm dictionaries.
    - find_numbers:
      - using COD::CIF::Parser and COD::CIF::Data::CODNumbers.
      - added the warning message handler.
    - Removing CIF 2.0 magic code from CIF file headers before the
      addition in order to avoid duplication and accidental conversion
      of CIF 1.0 files to CIF 2.0 in:
      - cif_filter
      - cif_hkl_COD_number
      - cif_mark_disorder
      - cif_molecule
      - cif_split
    - cif2ref: replacing STAR::Parser by COD::CIF::Parser.
    - COD::Spacegroups::Names: correcting several typos in the
      comments.
    - Fixing manpage formatting issue that resulted in merged option
      descriptions.
    - codcif and pycodcif: fixing void C function prototypes.

cod-tools (2.1)

  * Added:
    - cif_sort_atoms: a script to order atoms by given method.
    - cif_filter: command line options --original-filename-tag and
      --original-data-block-tag.
    - cif_validate: displaying a warning upon validation against DDLm
      conformant dictionaries.
    - cif_cod_check: raising a warning about the space group symmetry
      operation list not being provided in the input file when the
      --check-symmetry-operators option is enabled.
    - cif_split: command line option --do-not-split-global-data-block.
    - COD::CIF::Data::SymmetryGenerator: adding functions:
     - chemical_formula_sum
     - symop_apply
     - symop_register_applied_symop
     - symops_apply_modulo1
     - translate_atom
     - translation
     - trim_polymer
    - COD::CIF::Tags::Manage: adding function rename_tags().
    - cif_tcod_tree: command line option --no-outputs.
  * Changed:
    - cif_find_symmetry: outputting symmetry operators in a canonical
      form.
    - cif_validate:
      - updated the help message.
      - updated the error message related to unrecognised data names.
      - renamed several subroutines and changed their interfaces in
        preparation for the introduction of the DDLm validator. The
        subroutine 'check_against_range' was renamed to 'is_in_range',
        'check_against_range_numb' to 'is_in_range_numeric' and
        'check_against_range_char' to 'is_in_range_char'.
    - cif_find_duplicates: removed the unused import of the
      COD::CIF::Data::CellContents.
    - COD::Spacegroups::Symop::Parse: removed the warning messages
      from the is_symop_parsable() subroutine.
    - cif_cod_check: updated the warning messages dealing with
      symmetry operations.
    - Homogenising symmetry generation code in cif_molecule, cif_p1
      and COD::CIF::Data::Classifier::get_atoms(), reusing code from
      COD::CIF::Data::SymmetryGenerator and COD::CIF::Data::AtomList
      as much as possible.
    - cif_tcod_tree: adding AiiDA commands to load AiiDA database
      dump.
  * Fixed:
    - Removing the 'svn:keywords' svn property from test input CIF
      files.
    - cif_filter: adding name of database code data item to the list
      of data block tags.
    - cif_merge: truncating loop tags after having them overwritten
      with less values.
    - cif_cod_check:
      - correcting some warning messages to no longer contain the
        script name and line number where they were raised.
      - correcting the way the overall number of error messages is
        reported.
      - updated the check_symmetry_operators() and
        'check_space_group_info() subroutines to also consider the
        values of the _space_group_symop_operation_xyz data item.
    - cod_predeposition_check:
      - adding a full stop to the end of error messages raised by
        die().
    - COD::CIF::Data::CODPredepositionCheck: adding newlines to the
      end of error messages raised by die() to remove the
      automatically added script name and line number of the context
      they were raised in.
    - replacing deprecated usage of 'find ... -perm +1' by equivalent
      construction 'find ... -executable' in the installation routine.
    - COD::ErrorHandler: changed all instances of the 'errlevel' hash
      key to 'err_level' in order to homogenize the hash structure
      across different modules.
    - COD::UserMessage: changed the keys of parsed error messages hash
      in order to homogenize the hash structure across different Perl
      modules. The 'errlevel' key was changed to 'err_level', 'line'
      to 'line_no', 'column' to 'column_no' and 'datablock' to
      'add_pos'.
    - codcif and COD::CIF::Parser::Bison: detecting unallowed symbols
      in CIF 1.1 comments.
    - COD::AtomNeighbours: making neighbour_list_from_chemistry_mol()
      treat only aromatic atoms with three or more covalent neighbours
      as planar.
    - cif_molecule: symmetry operators other than identity are not
      applied to symmetry-independent disordered sites, identified by
      negative values of '_atom_site_disorder_group'.
    - COD::CIF::Parser: removing duplicated space in error message
      concerning unknown parser options.
    - codcif: initial byte sequence 0xFEFF was detected as CIF v2.0
      byte order mark instead of U+FEFF, which is the correct byte
      order mark.
    - COD::CIF::Data::AtomList: value of _cod_molecule_atom_transl_id
      was not read by set_cod_molecule_atom_fields().
    - COD::CIF::Tags::Manage: properly removing renamed data items by
      rename_tags().
    - Generating manpages for C scripts from src/components/codcif/.
    - cif_list_tags: implementing --help command line option.
    - Removing temporary directories of failed Shell test cases.
    - COD::CIF::Tags::Print:
      - Modifying the way malformed loops are handled by the print_loop()
        subroutine. From now on a warning message will be output and
        unknown ('?') values will be printed instead of the missing ones.
      - Preventing outputting of empty loops: printing a line of question
        marks, issuing a warning.

cod-tools (2.0)

  * Added:
    - codcif: reading/writing of CIF v2.0 format.
    - cif2json: adding the '--canonical' option that forces the output
      json to be sorted in a predetermined way.
    - COD::CIF::JSON: adding the second parameter to the cif2json()
      subroutine that is intended to store the options for the json
      encoding operation. Currently only the 'canonical' option is
      supported.
    - check_symop_canonicality: a new tool script.
  * Changed:
    - cif_find_symmetry: using symmetry operators as provided by
      spglib instead of operators from lookup hashes as ones from
      spglib seem to better describe space groups with
      nonconventional settings.
    - cif_find_symmetry: using Hall symbol (more precise) for the
      detection of symmetry space group in the output of spglib.
    - cif2json and json2cif: JSON, written/read by these scripts is
      now concatenable (relaxed) by default. Strictly conforming JSON
      can now be produced via --strict command line option in
      cif2json. json2cif is able to read both strict and relaxed JSON.
    - interface of C CIF parser:
      - datablock_value() -> datablock_cifvalue() in datablock.h
      - datablock_overwrite_value() -> datablock_overwrite_cifvalue()
        in datablock.h
      - datablock_types() -> datablock_value_type() in datablock.h
      - datablock_insert_value() -> datablock_insert_cifvalue() in
        datablock.h
      - datablock_push_loop_value() -> datablock_push_loop_cifvalue()
        in datablock.h
    - COD::CIF::Parser::Yapp: detecting and reporting CIF v2.0 format.
    - COD::CIF::Parser::Yapp: adding 'cifversion' subhash.
    - COD::CIF::Parser::Yapp: removing precisions of non-numeric
      looped tags.
    - COD::CIF::Parser::Yapp: decoding Unicode symbols in messages.
    - COD::Spacegroups::Lookup::COD: changing symop strings to their
      canonical forms.
    - COD::CIF::Data::CellContents: implementing a more thorough check
      of the Z value.
    - 'precisions' fields are added for all numeric CIF values, even
      non-looped ones.
    - cif_printout_Python: using pprint() to pretty-print CIF data
      structures.
    - cif_mark_disorder: renaming options --distance-sensivity and
      --occupancy-sensivity to --distance-sensitivity and
      --occupancy-sensitivity respectively.
    - Help messages: unifying the layout of the help messages
      (accessible via the --help command line option) and correcting a
      few typos in the help messages.
  * Removed:
    - datablock.h: datablock_values()
    - duplicate_space_groups: empty import of the
      COD::Spacegroups::Symop::Parse module.
  * Fixed:
    - adding perl-XML-Simple as a run dependency for CentOS 6.8.
    - detecting and removing DEL control character (ASCII decimal
      value 127) from CIF v1.1 strings.
    - pycodcif:
      - Adding the 'precisions' field to each of the save frames.
    - COD::CIF::Parser::Bison:
      - Adding the 'precisions' field to each of the save frames.
    - codcif: detecting ASCII symbols with decimal values 16-31 in
      CIF 1.1 files as errors.

cod-tools (1.1)

  * Added:
    - cif_find_symmetry and spglib interface (using spglib-1.6.4)
    - dependency list for LinuxMint-18.1.
    - cif_bounding_box: a new script to transform obabel-generated
      non-crystal CIF files (no symmetry information, cell parameters,
      Cartesian coordinates given instead of fractional) to cubic unit
      cells, separated by margins of vacuum.
    - cif2rdf: a new script to generate RDF descriptions directly from
      CIF files.
    - cif_fix_values: adding functionality to fix the most common
      mistakes in the values of
      _atom_sites_solution_{primary,secondary,hydrogens}.
    - cif2cod: validating extracted data against SQL data field
      descriptions from database-description.xml.
    - COD::CIF::Data::CIF2COD: adding validate_SQL_types().
    - JSON schema for validation of output from cif2json and like.
    - oqmd2cif: adding convergence flags and labels, lattice and total
      energies, magnetic moments, band gaps, VASP settings, OQMD
      calculation and structure labels, runtime values, error flags,
      OQMD database codes, references to calculation input structures.
    - cod_predeposition_check: implementing parser selection via
      command line options.
    - COD::RDF: a new module for RDF generation with most of the code
      taken from cod2rdf.
    - COD::AuthorNames: a new module for author name parsing to a new
      Perl module with the code from:
      URL: svn+ssh://www.crystallography.net/home/coder/svn-repositories/codcif2xml/trunk/programs/rdfxml2xml
      Repository Root: svn+ssh://www.crystallography.net/home/coder/svn-repositories/codcif2xml
      Repository UUID: e9639961-1eee-46c2-8ca7-0101a2976781
      Revision: 73
    - COD::Algebra: a new module with common GCD functions
    - COD::AtomNeighbours: adding subroutine
      neighbour_list_from_chemistry_mol() for the construction of
      atom neighbours data structure from the output of
      Chemistry::Mol Perl module.
    - cif_hkl_check: diffraction data files conforming to
      cif_twinning.dic are detected as containing diffraction data.
    - COD::Spacegroups::Lookup::COD: adding an extra space group
      setting 'P n m a (c,a-1/4,b)'.
    - cif2cod: adding '--include-keywords-with-undefined-values' and
      '--exclude-keywords-with-undefined-values' command line options.
    - cif_parse: adding '--(no|dont)-fix-syntax-errors' command line
      options.
    - cif_filter: reporting cases when the symmetry space group can
      not be determined from symmetry operators.
    - COD::Algebra::Vector: adding subroutine vector_len().
    - cif_diff: adding '--ignore-empty-values' command line option.
    - cif_fillcell: adding '_space_group_IT_number' and
      '_space_group_name_Hall' data items to the output.
    - cif_fillcell: adding '--unit-cell', '--no-supercell',
      '--supercell' command line options.
    - cif_validate: checking the existence of parent links, as defined
      via '_list_link_parent' of ddl_core.dic.
    - cif_cod_check: adding a check to locate disorder groups of the
      same assembly having different numbers of atoms (off by
      default).
    - COD::Cell: adding vectors2cell().
    - COD::CID::Data::CIF2COD: adding fields 'cellformula' and
      'compoundsource'.
    - COD::Algebra::Vector: adding vector_angle().
    - COD::CID::Data::CIF2COD: detecting CIF data blocks without
      fractional coordinates.
    - Build dependencies for CentOS 6.8 and Debian 8.2.
    - AtomProperties pipeline: adding dependencies.
    - cif_reduce_Niggli: adding command line option '--compute-symops'
      to compute symmetry operators as well as estimate space groups
      for reduced cells. Experimental, thus off by default.
    - cif2json: a new script to convert CIF to its JSON representation.
    - json2cif: a new script to convert JSON to CIF data structure.
    - Implementing input/output CIF in JSON carrier format in:
      - cif2cod
      - cif_cod_check
      - cif_cod_numbers
      - cif_correct_tags
      - cif_filter
      - cif_printout
      - cif_split
    - COD::CIF::JSON: adding Yapp-like object-oriented interface.
    - COD::CIF::Data::SymmetryGenerator: adding apply_shifts() and
      shift_atom().
    - Test dependency list for Ubuntu 12.04.
    - COD::Cell::Delaunay::Delaunay: more debug prints.
    - COD::AtomProperties: Adding the 'Dummy' atom.
    - COD::AtomProperties assembler:
      - Adding the 'Dummy' atom rule to the assembling process.
      - Adding a way to specify the name of the assembled Perl module.
      - Adding a way to specify the namespace of the assembled Perl
        module.
    - cif_molecule: Adding the '--exclude-dummy-atoms' option.
    - COD::CIF::Data::AtomList: adding the 'exclude_dummy_coordinates'
      option to the atom_array_from_cif() subroutine that excludes
      atoms with at least one dot ('.') coordinate.
    - version information is printed by most of the scripts using
      --version command line option.
  * Changed:
    - COD::CID::Data::CIF2COD treats CIF value '?' amid white space as
      undefined.
    - CIF parsers:
      - adding the ' -- fixed' suffix to parser warning messages
        informing about unquoted strings with spaces.
      - rephrasing error messages in the CIF parsers: replacing one
        occurrence of comma (',') and one occurrence of a dash ('-')
        with two dashes ('--') and changing the phrase 'replaced by'
        to 'replaced with'.
    - Messages in scripts:
      - cif_cod_check
      - cif_correct_tags
      - cif_diff
      - cif_filter
      - cif_fix_values
      - cif_hkl_check
      - cif_merge
      - cif_validate
      - cif2cod
    - Messages in Perl modules:
      - COD::Cell::Niggli::KG76
      - COD::CIF::Data
      - COD::CIF::Data::AtomList
      - COD::CIF::Data::CIF2COD
      - COD::CIF::Data::CODNumbers
      - COD::CIF::Data::CODPredepositionCheck
      - COD::CIF::Data::Diff
      - COD::SOptions
      - COD::Spacegroups::Lookup::COD
    - Renamed tools/duplicate_spacegroups ->
      tools/duplicate_space_groups
    - COD XML:
      - adding descriptions of 'Z', 'Zprime', 'cellformula' and
        'compoundsource'.
      - renaming 'CODDictionary' tag to 'Database', 'CODParameter' to
        to 'Field', 'CODCode' to 'Code'.
      - adding SQL data to 'SQLDataType' tags.
    - Ceasing to convert horizontal tabulations ('\t') into spaces in
      both Bison and Yapp CIF parsers, since such treatment of '\t'
      may corrupt data. Furthermore, such conversion caused lots of
      memory reallocations in Bison CIF parser.
    - cif_correct_tags:
      - Adding misspelt variants of the following tags to the
        replacement list
        (data/replacement-values/replacement_tags.lst):
        - _atom_site_site_symmetry_multiplicity
        - _atom_site_symmetry_multiplicity
        - _exptl_crystal_F_000
        - _geom_*
        - _publ_author_name
        - _publ_author_address
        - _publ_contact_author
      - Correcting several replacement rules.
      - Copying tests/inputs/replacement_tags.lst to
        data/replacement-values/.
      - Adding an error message regarding misspelt looped tags.
      - Adding several error messages regarding the situation when the
        correctly spelt data item and the misspelt one are found in
        the same file.
    - cif_cod_numbers: also considering the unit cell formula and
      compound source when searching for duplicate entries.
    - cif_tcod_tree: using more portable way to fetch contents of
      remote file to Perl scalar using WWW::Curl::Easy.
    - pycodcif:
      - Renaming Python bindings of codcif to pycodcif.
      - Making parser options optional.
      - Using python2.6 if python2.7 does not exist, using more
        common Python syntax in order to make Python code more
        backwards-compatible, in particular with python2.6.
    - COD::CIF::Unicode2CIF: converting named and decimal-numbered
      XML entities into appropriate UTF-8 code points.
    - COD::CIF::Tags::DFT: updating tag list according to
      cif_dft.dic v0.020
    - COD::CIF::Tags::DictTags: updating tag list according to
      cif_core.dic v2.4.5
    - COD::CIF::Tags::TCOD: updating tag list according to
      cif_tcod.dic v0.009
    - Replacing COD::CIF::Data::SymmetryGenerator(),
      COD::CIF::Data::AtomList::copy_struct_deep() and analogous
      functions with Perl built-in Clone::clone().
    - Eliminating "sponge" from
      makefiles/Makefile-perl-multiscript-tests to enable builds on
      CentOS-6.8.
    - COD::CIF::Data::CIF2COD: removing unused arguments (filename,
      data block) from subroutine interfaces.
    - cif_fillcell: replacing deprecated CIF tags with their new
      counterparts.
    - COD::CIF::Data::SymmetryGenerator: apply_shifts() returns
      array reference instead of the array.
    - cif_distances: removing extra space from the output.
    - cif_molecule:
      - printing only first five messages about detected bumps.
      - ignoring atoms with dummy ('.') or unknown ('?') coordinates.
    - codcif and COD::CIF::Parser: removing duplicated line and
      position numbers from parser error messages.
    - Canonicalizing CIF data item names in a bunch of scripts that
      have not used this feature before. Homogeneous treatment of CIF
      data item names in the whole system is necessary both to
      leverage the reusability of code and to avoid bugs.
    - cif_fillcell: building unit cell by default (instead of the
      3x3x3 supercell).
    - COD::SOptions: renaming interpolateFile() to interpolate_file().
    - Moving atom_groups() and assemblies() from cif_molecule and
      cif_p1 to COD::CIF::Data::AtomList.
    - cexceptions and getoptions: changing the linker from 'ld' to
      'cc'.
    - cif_distances: selecting the first shortest distance: this
      should solve the floating-point problem that occurs on different
      machines.
    - codcif: explicitly specifying the CIF version in error messages
      of the type 'it is not acceptable in this version'.
    - cif_distances: replacing shift_atom() with apply_shifts() from
      COD::CIF::Data::SymmetryGenerator.
    - COD::Spacegroups::Symop::Algebra: symop_vector_mul() returns
      array reference (Perl wantarray construction was used before).
    - cif_distances: excluding atoms with unknown coordinates.
    - COD::CIF::Data::AtomList:
      - ordering atoms by their summary occupancies in atom_groups().
      - moving the logic that allows to skip an atom before
        extracting it into a separate subroutine 'is_atom_excludable'.
      - removing the 'do_not_resolve_chemical_type' option from the
        extract_atom() subroutine since the same functionality can
        also be achieved with the 'allow_unknown_chemical_types'
        option.
      - moving logic that sets atom values generated by 'cif_molecule'
        to a separate subroutine 'set_cod_molecule_atom_fields'.
    - Renaming COD::CIF2JSON to COD::CIF::JSON.
    - COD::CIF::JSON: switching to stream-oriented JSON parsing.
    - Moving the warning message about the user-provided Z value
      mismatching the one given in the input file from the
      COD::CIF::Data::CellContents module to the cif_cell_contents
      script.
    - Unifying interfaces of:
      - COD::Cell::Conventional::deWG91::reduce()
      - COD::Cell::Delaunay::Delaunay::reduce()
      - COD::Cell::Niggli::KG76::reduce()
    - COD::CIF::Data::CIF2COD: adding 'Z' and 'Zprime' to the list of
      default new fields.
    - cif_printout: changing default print mode to Data::Dumper in
      order to allow printing of nested data structures.
    - COD::CIF::Data::CODPredepositionCheck: replacing
      COD::ErrorHandler::process_errors() calls with calls to local
      critical().
    - Moving extraction of '_atom_site_symmetry_multiplicity' value to
      COD::CIF::Data::AtomList::extract_atom() from
      COD::CIF::Data::AtomList::atom_array_from_cif().
    - COD::CIF::Parser::Bison: linking compiled module against
      archives of static libraries (.a) instead of objects (.o) of
      codcif, cexceptions and getoptions.
    - COD::AtomProperties assembler:
      - Migrating to using the 'elements.xml' file from the '0a50119'
        commit of the BODR (https://github.com/egonw/bodr) repository.
      - Refactoring: changing the module name from 'AtomProperties' to
        'COD::AtomProperties'.
      - Correcting a few layout mistakes in the comments providing the
        data sources.
  * Deprecated:
    - usage of doc/CODDictionary.xml (database-description.xml of
      appropriate database should be used instead, such as
      http://www.crystallography.net/cod/xml/documents/database-description/database-description.xml)
  * Removed:
    - doc/TAGS.XML
    - COD::Spacegroups::Symop::Algebra: symop_apply(). Using
      symop_vector_mul() instead.
    - COD::CIF::Data::SymmetryGenerator: copy_atom(). Using
      copy_atom() from COD::CIF::Data::AtomList instead.
    - debian/ directory.
  * Fixed:
    - adding libxml-simple-perl as a run dependency for Ubuntu-12.04
      and Debian-8.6.
    - CIF line folding protocol:
      - COD::CIF::Parser::Yapp: removing backslash from the last line
        of unfolded CIF text field.
      - codcif and COD::CIF::Parser::Yapp: removing trailing
        whitespace from the lines of to-be-unfolded CIF text fields.
    - CIF line unprefixing protocol:
      - COD::CIF::Parser::Bison: removing the empty line from the
        beginning of the text field when the line is unprefixed but
        not unfolded.
      - COD::CIF::Parser::Yapp: unprefixing a multiline text field
        that has a "/\n" as its second line no longer causes the text
        field to also be unfolded.
    - COD::CIF::Unicode2CIF:
      - converting CIF triple dash ('---') into UTF-8 em dash
        (&#x2014;) instead of a combination of figure dash and en
        dash.
      - converting CIF symbol '\s' to lowercase sigma (GREEK SMALL
        LETTER SIGMA) instead of final lowercase sigma (GREEK SMALL
        LETTER FINAL SIGMA). On the other way round, UTF-8 code point
        for final lowercase sigma is now converted into corresponding
        XML entity instead of CIF markup symbol '\s'.
      - converting tilde symbol '~' into CIF '\\sim ' sequence as per
        CIF specification instead of the '\sim ' sequence.
    - codcif: fixing incorrect line numbers in error messages.
    - Memory leaks in codcif and COD::CIF::Parser::Bison.
    - codcif: performing all character operations via int data type
      (instead of char) in cif_lexer.c, as conversions between char
      and int used to cause loss of EOF characters.
    - cif_split_primitive: preserving CIF comments in the output of
      the script.
    - Error messages in codcif (occurence -> occurrence)
    - Error messages in the following scripts:
      - cif_molecule
      - cod_predeposition_check
    - Error messages in the following Perl modules:
      - COD::CIF::Data::CODPredepositionCheck
      - COD::SOptions
    - Help texts of the following scripts:
      - cif_cell_contents
      - cif_cod_check
      - cif_cod_deposit
      - cif_cod_numbers
      - cif_diff
      - cif_eval_numbers
      - cif_filter
      - cif_hkl_COD_number
      - cif_hkl_check
      - cif_merge
      - cif_molecule
      - cif_p1
      - cif_select
      - cif_split
      - cif2cod
      - cifparse
      - cod_predeposition_check
    - cif_select: adding a missing import of
      COD::CIF::Tags::Manage::rename_tag()
    - cif_cod_check: using explicit UTF-8 binmode for STDERR.
    - COD::UserMessage: escaping newline characters in generated
      messages with numeric character reference '&#10;' in order to
      comply with the EBNF grammar of error messages as published in
      Merkys et al. 2016.
    - COD::Formulae::Parser::AdHoc: using COD::UserMessage for
      message formation.
    - cif_Fcalc: fixing a typo in the atom property name
      ('scat_dispesion_real' -> 'scat_dispersion_real').
    - COD::CIF::Data::CIF2COD: returning SQL NULL instead of string
      "NULL" for unknown cell volumes.
    - codcif: duplicated tags, whose second occurrence is in a loop,
      were reported as warnings instead of errors.
    - cif_cod_deposit: adding '--show-error' command line option for
      'curl' in order to make its error messages visible.
    - codcif: escaping special symbols ('&', ':', spaces and
      parentheses in some lexems) in C parser messages.
    - codcif: detecting reserved CIF lexem 'global_'.
    - codcif and COD::CIF::Parser::Yapp: detecting empty CIF data
      block names.
    - codcif and COD::CIF::Parser::Yapp: detecting unquoted CIF
      strings starting with closing square brackets.
    - codcif and COD::CIF::Parser::Yapp: returning an empty list of
      data blocks upon parsing empty CIF files. According to the CIF
      specification, empty CIF is an empty list of data blocks.
    - codcif: reporting replaced spaces in data block names as
      WARNINGs instead of NOTEs.
    - COD::CIF::Data::AtomList:
      - sorting hash keys in atom_groups() in order to prevent from
        non-deterministic output.
      - sorting the disorder assemblies so the output results would
        not be affected by the Perl hashing algorithm.
    - codcif: allowing unquoted CIF strings that begin with 'loop_'
      prefix albeit not equal to 'loop_' string.
    - COD::CIF::Tags::Print: quoting unquoted CIF strings starting
      with closing square bracket.
    - Fixing exception handling in the following scripts:
      - cif_fix_values
      - cif_reduce_cell
      - cif2xyz
    - COD::ErrorHandler: ensuring that the code block is only
      executed upon successful matching.
    - COD::CIF::Data: checking whether tag's value/precision is
      defined in get_cell().
    - codcif: detecting and fixing headerless CIF files composed of a
      single CIF data item only.
    - COD::CIF::Parser::Yapp: everything from the quote symbol to the
      end of the line will be considered a part of the misquoted
      string.
    - cif_filter:
      - removing fold() subroutine call in the bibliography reference
        hash processing block. The subroutine was called in the wrong
        place and disregarded the command line options
        '--folding-width', '--fold-title' and '--dont-fold-title'.
      - user provided command line options dealing with
        bibliographical information are now ignored if the provided
        value is an empty string.
    - Replacing indirect Perl method calls (new Object) with direct
      methods calls (Object->new) since it is the preferred way.
    - COD::UserMessage: avoiding negative positions in error messages.
    - COD::CIF::Data::CIF2COD: cif2cod():
      - determines number of distinct elements for structures with
        defined and non-empty chemical formulae.
      - The cif markup entity conversion is now carried out before
        collapsing several white spaces into a single white space.
        This allows to preserve at least a single whitespace after
        the symbol encoded by the cif markup entity.
    - cif_molecule:
      - Simple polymers are now detected even with
        '--max-polymer-span 0'.
      - Trimming polymers after polymer dimension measurement and
        before formulae calculation. Multiple moieties are then merged
        into one if one data block output is requested. Thus, correct
        formulae are achieved and non-polymer atoms are not trimmed.
      - Enforcing '.' occupancies for all output dummy atoms even if
        the '--force-unit-occupancies' option is in effect.
      - Setting multiplicities to '?' for atoms of dummy molecules.
      - Preventing printing of a syntactically incorrect CIFs (ones
        that contain loops without values).
    - pycodcif: passing the 'fix_datablock_name' option directly to
      the lexer.
    - pycodcif: unpacking of floats with precisions with a sign
      ('+' or '-') and implicit integer parts (-.01 and +.01).
    - installing of pycodcif.
    - oqmd2cif: producing syntactically correct CIF files for
      structures without any atoms.
    - COD::Cell::Delaunay::Delaunay: correcting the Delaunay
      reduction algorithm so that it does not return flattened unit
      cells.
    - COD::Cell::Conventional::deWG91: transposing the new basis
      matrix to get the correct cell vectors, correcting cell
      computation after the reduction.
    - COD::SOptions: modifying 'interpolate_file' subroutine to print
      the error message about not being able to open the file even if
      the 'option' argument is not provided.

cod-tools (1.0)

  * Initial release.
